openapi: 3.0.0
info:
  version: 4.1.1
  title: Common Account API
  description: >
    This specification defines a simple API to access information about bank accounts.
    The API is supposed to be used by customers who want to get information about their
    accounts such as current balance or transactions.
    This specification uses schema definitions from the Common Data Model v1.2.1.
  termsOfService: tbd
  contact:
    email: info@common-api.ch
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
servers:
  - url: account.common-api.ch/api/v4
externalDocs:
  description: Find out more about SFTI API specifications
  url: https://www.common-api.ch

tags:
  - name: accounts
    description: Third party access to bank account service considering account information and transaction data operations (JSON).
  - name: iso20022
    description: Third party access to bank account service considering camt.053 operations (XML).

security:
  - OAuth2:
      - read
      - write

paths:
  /accounts:
    get:
      tags:
        - accounts
      summary: Retrieve list of authorized accounts
      description: Return the list of all accounts accessible for the logged in user.
      parameters:
        - $ref: '#/components/parameters/cursor'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/authorization_in_header'
        - $ref: '#/components/parameters/clientid_in_header'
        - $ref: '#/components/parameters/correlation_in_header'
        - $ref: '#/components/parameters/agent_in_header'
        - $ref: '#/components/parameters/optional_targetid_in_header'
        - $ref: '#/components/parameters/optional_psu_ip_in_header'
        - $ref: '#/components/parameters/optional_psu_user_agent_in_header'
      responses:
        '200':
          description: Paginated list of all accounts.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/X-Correlation-ID'
            X-Next-Cursor:
              $ref: '#/components/headers/X-Next-Cursor'
          content:
            application/json:
              schema:
                type: object
                required:
                  - accounts
                properties:
                  accounts:
                    type: array
                    items:
                      $ref: '#/components/schemas/AccountItem'
        '400':
          $ref: '#/components/responses/standard400'
        '401':
          $ref: '#/components/responses/standard401'
        '403':
          $ref: '#/components/responses/standard403'
        '404':
          $ref: '#/components/responses/standard404'
        '405':
          $ref: '#/components/responses/standard405'
        '500':
          $ref: '#/components/responses/standard500'
        '501':
          $ref: '#/components/responses/standard501'
        '503':
          $ref: '#/components/responses/standard503'

  /accounts/{accountId}:
    get:
      tags:
        - accounts
      summary: Retrieve information about a single specific account
      description: Returns the accounts details of the specified account.
      parameters:
        - $ref: '#/components/parameters/path_accountId'
        - $ref: '#/components/parameters/authorization_in_header'
        - $ref: '#/components/parameters/clientid_in_header'
        - $ref: '#/components/parameters/correlation_in_header'
        - $ref: '#/components/parameters/agent_in_header'
        - $ref: '#/components/parameters/optional_targetid_in_header'
        - $ref: '#/components/parameters/optional_psu_ip_in_header'
        - $ref: '#/components/parameters/optional_psu_user_agent_in_header'
      responses:
        '200':
          description: Account details of the specified account.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountItem'
        '400':
          $ref: '#/components/responses/standard400'
        '401':
          $ref: '#/components/responses/standard401'
        '403':
          $ref: '#/components/responses/standard403'
        '404':
          $ref: '#/components/responses/standard404'
        '405':
          $ref: '#/components/responses/standard405'
        '500':
          $ref: '#/components/responses/standard500'
        '501':
          $ref: '#/components/responses/standard501'
        '503':
          $ref: '#/components/responses/standard503'

  /accounts/{accountId}/balance:
    get:
      tags:
        - accounts
      summary: Retrieve account balance information
      description: |
        Returns account balance information of the specified account.
        * Returns the interim booked balance (ISO20022 Balance Type ITBD) for the current day, if called without a date. The balance is calculated
        in the course of the service provider's business day, at the time specified, and subject to further changes during the business day. The
        interim balance is calculated on the basis of booked credit and debit items during the calculation time/period specified.
        * Returns the closing booked balance (ISO20022 Balance Type CLBD) for a specific day, if called for a past date. It is the sum of the opening
        booked balance at the beginning of that day and all entries booked to the account during that day. In case the specified day has not yet been
        finalized, the response code will be 202.
      parameters:
        - $ref: '#/components/parameters/path_accountId'
        - $ref: '#/components/parameters/date'
        - $ref: '#/components/parameters/authorization_in_header'
        - $ref: '#/components/parameters/clientid_in_header'
        - $ref: '#/components/parameters/correlation_in_header'
        - $ref: '#/components/parameters/agent_in_header'
        - $ref: '#/components/parameters/optional_targetid_in_header'
        - $ref: '#/components/parameters/optional_psu_ip_in_header'
        - $ref: '#/components/parameters/optional_psu_user_agent_in_header'
      responses:
        '200':
          description: Account balance information of the specified account.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountBalanceItem'
        '202':
          $ref: '#/components/responses/standard202'
        '204':
          $ref: '#/components/responses/standard204'
        '400':
          $ref: '#/components/responses/standard400'
        '401':
          $ref: '#/components/responses/standard401'
        '403':
          $ref: '#/components/responses/standard403'
        '404':
          $ref: '#/components/responses/standard404'
        '405':
          $ref: '#/components/responses/standard405'
        '500':
          $ref: '#/components/responses/standard500'
        '501':
          $ref: '#/components/responses/standard501'
        '503':
          $ref: '#/components/responses/standard503'

  /accounts/{accountId}/transactions:
    get:
      tags:
        - accounts
      summary: Retrieve transactions of a specific account
      description: |
        Returns the transaction list of the specified account.
        * Returns the transaction list of the current day, if called without a date.
        * Returns the transaction list for a specific day, if called for a past date (i.e. all transactions from that day).
        In case the specified day is not yet finalized, the response code will be 202.
      parameters:
        - $ref: '#/components/parameters/path_accountId'
        - in: query
          name: dateFrom
          schema:
            $ref: '#/components/schemas/Date'
          description: The start date of the transaction query.
        - in: query
          name: dateTo
          schema:
            $ref: '#/components/schemas/Date'
          description: The end date of the transaction query.
        - in: query
          name: entryStatus
          required: false
          schema:
            type: string
            enum:
              - booked
              - pending
              - both
            default: booked
          description: >
            Specifies the status of the entries to be queried.
            Intraday movements can have a status of either "pending" or "booked."
            For completed booking days, only entries with a "booked" status will be returned.
        - $ref: '#/components/parameters/cursor'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/authorization_in_header'
        - $ref: '#/components/parameters/clientid_in_header'
        - $ref: '#/components/parameters/correlation_in_header'
        - $ref: '#/components/parameters/agent_in_header'
        - $ref: '#/components/parameters/optional_targetid_in_header'
        - $ref: '#/components/parameters/optional_psu_ip_in_header'
        - $ref: '#/components/parameters/optional_psu_user_agent_in_header'
      responses:
        '200':
          description: Account details of the requested account.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/X-Correlation-ID'
            X-Next-Cursor:
              $ref: '#/components/headers/X-Next-Cursor'
          content:
            application/json:
              schema:
                type: object
                required:
                  - transactions
                properties:
                  transactions:
                    type: array
                    items:
                      $ref: '#/components/schemas/AccountTransactionReport'
        '202':
          $ref: '#/components/responses/standard202'
        '204':
          $ref: '#/components/responses/standard204'
        '400':
          $ref: '#/components/responses/standard400'
        '401':
          $ref: '#/components/responses/standard401'
        '403':
          $ref: '#/components/responses/standard403'
        '404':
          $ref: '#/components/responses/standard404'
        '405':
          $ref: '#/components/responses/standard405'
        '500':
          $ref: '#/components/responses/standard500'
        '501':
          $ref: '#/components/responses/standard501'
        '503':
          $ref: '#/components/responses/standard503'

  /accounts/{accountId}/transactions/{entryId}:
    get:
      tags:
        - accounts
      summary: Details of the specified transaction
      description: Retrieves the details of the specified transaction.
      parameters:
        - $ref: '#/components/parameters/path_accountId'
        - $ref: '#/components/parameters/path_entryId'
        - $ref: '#/components/parameters/authorization_in_header'
        - $ref: '#/components/parameters/clientid_in_header'
        - $ref: '#/components/parameters/correlation_in_header'
        - $ref: '#/components/parameters/agent_in_header'
        - $ref: '#/components/parameters/optional_targetid_in_header'
        - $ref: '#/components/parameters/optional_psu_ip_in_header'
        - $ref: '#/components/parameters/optional_psu_user_agent_in_header'
      responses:
        '200':
          description: Account details of the requested account.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountTransactionEntry'
        '400':
          $ref: '#/components/responses/standard400'
        '401':
          $ref: '#/components/responses/standard401'
        '403':
          $ref: '#/components/responses/standard403'
        '404':
          $ref: '#/components/responses/standard404'
        '405':
          $ref: '#/components/responses/standard405'
        '500':
          $ref: '#/components/responses/standard500'
        '501':
          $ref: '#/components/responses/standard501'
        '503':
          $ref: '#/components/responses/standard503'

  /iso20022/statements:
    get:
      tags:
        - iso20022
      summary: Retrieve a list of resource links to account statements (camt.053)
      description: >
        Get the resources links to available account statements (camt.053).
        The returned account statements must be conform to the XML schema and
        implementation guidelines defined by Swiss Payment Standards.
      parameters:
        - $ref: '#/components/parameters/cursor'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/authorization_in_header'
        - $ref: '#/components/parameters/clientid_in_header'
        - $ref: '#/components/parameters/correlation_in_header'
        - $ref: '#/components/parameters/agent_in_header'
        - $ref: '#/components/parameters/optional_targetid_in_header'
        - $ref: '#/components/parameters/optional_psu_ip_in_header'
        - $ref: '#/components/parameters/optional_psu_user_agent_in_header'
      responses:
        '200':
          description: Returns a list of resource links to ISO20022 XML camt.053 messages.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/X-Correlation-ID'
            X-Next-Cursor:
              $ref: '#/components/headers/X-Next-Cursor'
          content:
            application/json:
              schema:
                type: object
                required:
                  - statements
                properties:
                  statements:
                    type: array
                    items:
                      $ref: '#/components/schemas/Iso20022ReportReference'
        '400':
          $ref: '#/components/responses/standard400'
        '401':
          $ref: '#/components/responses/standard401'
        '403':
          $ref: '#/components/responses/standard403'
        '404':
          $ref: '#/components/responses/standard404'
        '405':
          $ref: '#/components/responses/standard405'
        '500':
          $ref: '#/components/responses/standard500'
        '501':
          $ref: '#/components/responses/standard501'
        '503':
          $ref: '#/components/responses/standard503'

  /iso20022/statements/{reportId}:
    get:
      tags:
        - iso20022
      summary: Designated ISO20022 XML camt.053 document
      description: Retrieves the designated ISO20022 XML camt.053 document.
      parameters:
        - $ref: '#/components/parameters/path_reportId'
        - $ref: '#/components/parameters/authorization_in_header'
        - $ref: '#/components/parameters/clientid_in_header'
        - $ref: '#/components/parameters/correlation_in_header'
        - $ref: '#/components/parameters/agent_in_header'
        - $ref: '#/components/parameters/optional_targetid_in_header'
        - $ref: '#/components/parameters/optional_psu_ip_in_header'
        - $ref: '#/components/parameters/optional_psu_user_agent_in_header'
      responses:
        '200':
          description: Returns the requested ISO20022 XML camt.053 message.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/X-Correlation-ID'
          content:
            application/xml; charset=utf-8:
              schema:
                type: string
        '400':
          $ref: '#/components/responses/standard400'
        '401':
          $ref: '#/components/responses/standard401'
        '403':
          $ref: '#/components/responses/standard403'
        '404':
          $ref: '#/components/responses/standard404'
        '405':
          $ref: '#/components/responses/standard405'
        '500':
          $ref: '#/components/responses/standard500'
        '501':
          $ref: '#/components/responses/standard501'
        '503':
          $ref: '#/components/responses/standard503'

# -------------------------
# -------- Models ---------
# -------------------------
components:
  schemas:
    AccountBalanceItem:
      title: Account Balance Item
      type: object
      description: The account balance object.
      required:
        - date
        - balanceType
        - balance
      properties:
        date:
          $ref: '#/components/schemas/Date'
          description: The date for which the balance was retrieved.
        balanceType:
          type: string
          enum:
            - ITBD
            - CLBD
          description: >
            The account balance type according to ISO20022. Either the interim booked balance (ITBD)
            or the closing booked balance (CLBD) type can be applied. Corresponds to the attribute _Bal ⇾ Tp_ in SPS/ISO-20022.
          example: CLBD
        balance:
          $ref: '#/components/schemas/BalanceCurrencyAmount'
        _links:
          type: object
          description: Contains the paths to additional resources for specific account (e.g. path to account and transactions resource).
          properties:
            self:
              type: string
              example: /accounts/550e8400-e29b-11d4-a716-446655440000/balance
            account:
              type: string
              example: /accounts/550e8400-e29b-11d4-a716-446655440000
            transactions:
              type: string
              example: /accounts/550e8400-e29b-11d4-a716-446655440000/transactions

    AccountItem:
      title: Account Information Item
      type: object
      description: The account object.
      required:
        - account
        - accountOwner
        - accountTypeCode
        - currency
        - designation
        - id
      properties:
        id:
          $ref: '#/components/schemas/CommonAccountId'
        account:
          $ref: '#/components/schemas/PaymentIbanAccount'
        accountOwner:
          type: string
          maxLength: 140
          description: The owner of the account.
          example: Account Owner XYZ
        currency:
          $ref: '#/components/schemas/Currency'
          description: The ISO currency three-letter code denominated and set for the account at the time it is opened.
        allowedCurrencies:
          type: array
          items:
            type: string
            example: CHF
          description: Permitted currencies for the account.
        designation:
          $ref: '#/components/schemas/Designation'
        accountTypeCode:
          type: string
          description: |
            Contains the account type code according to the ISO20022 external cash account type code list. It is strongly recommended
            to use only the 5 codes below as follows:
            * LOAN: Account used for loans (loan and mortgage accounts) - DE: Darlehenskonto, Kreditkonto, Baukreditkonto, Hypothekarkonto
            * LLSV: Account used for savings with special interest and withdrawal terms (pension provision and vested benefits accounts) -
            DE: Vorsorge- und Freizügigkeitskonten
            * SVGS: Account used for savings (all types of saving accounts)
            * TRAN: Account used for transactions (all types of personal, current and payment accounts) - DE: Privat-, Kontokorent- und
            Zahlungsverkehrskonten
            * OTHR: Account not otherwise specified (gathering pool for all other accounts)
            **NOTE:** This property will become mandatory with the next major release v5 of this API.
          example: TRAN
          enum:
            - CACC
            - CARD
            - CASH
            - CHAR
            - CISH
            - COMM
            - CPAC
            - LLSV
            - LOAN
            - MGLD
            - MOMA
            - NFCA
            - NREX
            - ODFT
            - ONDP
            - OTHR
            - SACC
            - SLRY
            - SVGS
            - TAXE
            - TRAN
            - TRAS
            - VACC
        _links:
          type: object
          description: Contains the paths to additional resources for specific account (e.g. path to balance and transactions resource).
          properties:
            self:
              type: string
              example: /accounts/550e8400-e29b-11d4-a716-446655440000
            balance:
              type: string
              example: /accounts/550e8400-e29b-11d4-a716-446655440000/balance
            transactions:
              type: string
              example: /accounts/550e8400-e29b-11d4-a716-446655440000/transactions

    AccountTransactionCounterpartyAccount:
      title: Account Transaction Counterparty Account
      description: Specifies the counterparty account (debtor account if transaction type = CRDT, creditor account if transaction type = DBIT).
      type: object
      required:
        - type
        - identification
      properties:
        type:
          type: string
          enum:
            - IBAN
            - OTHER
          description: The account idientification type of the counterparty account, either IBAN or OTHER.
          example: IBAN
        identification:
          type: string
          maxLength: 35
          description: 'The account identification: IBAN, ISR participant number or bank account number.'
          example: CH9300762011623852957

    AccountTransactionBankTransactionCode:
      title: Account Transaction Bank Transaction Code
      type: object
      description: >
        The bank transaction code (ISO20022) object of an account transaction. Specifies a set of elements to fully identify the type of
        underlying transaction resulting in an entry.
      required:
        - domainCode
        - familyCode
        - subFamilyCode
      properties:
        domainCode:
          type: string
          maxLength: 4
          description: >
            The code of the business area of the underlying transaction according to the "Bank Transaction Code". Corresponds to the attribute
            _Domn ⇾ Cd_ in SPS/ISO-20022.
          example: PMNT
        familyCode:
          type: string
          maxLength: 4
          description: >
            The family code within a specific domain according to the "Bank Transaction Code". Corresponds to the attribute _Fmly ⇾ Cd_
            in SPS/ISO-20022.
          example: RCDT
        subFamilyCode:
          type: string
          maxLength: 4
          description: >
            Specifies the sub-family code within a specific domain according to the "Bank Transaction Code". Corresponds to the attribute
            _SubFmlyCd_ in SPS/ISO-20022.
          example: DMCT

    AccountTransactionCounterparty:
      title: Account Transaction Counterparty
      type: object
      description: Specifies the counterparty details (creditor or debtor).
      properties:
        name:
          type: string
          maxLength: 140
          description: Name of the counterparty (debtor name if transaction type = CRDT, creditor name if transaction type = DBIT).
          example: Hans Muster
        postalAddress:
          $ref: '#/components/schemas/AccountTransactionStructuredOrUnstructuredAddress'
        account:
          $ref: '#/components/schemas/AccountTransactionCounterpartyAccount'
        agent:
          $ref: '#/components/schemas/AccountTransactionCounterpartyAgent'

    AccountTransactionCounterpartyAgent:
      title: Account Transaction Counterparty Agent
      type: object
      description: The account transaction counterparty agent object.
      properties:
        bic:
          type: string
          minLength: 8
          maxLength: 11
          description: |
            The bank identifier code (BIC) of the creditor agent of a payment. Corresponds to the attribute
            _CdtrAgt ⇾ FinInstnId ⇾ BIC_ in SPS/ISO-20022.
            The BIC is an 8 or 11-character code that breaks down as follows:
            - First 4 characters - bank code (letters only)
            - Next 2 characters - ISO 3166-1 alpha-2 country code (letters only)
            - Next 2 characters - location code (letters and digits)
            - Last 3 characters (optional) - branch code, specifying a particular branch of the bank (letters and digits)
          example: DEUTDE5M101
        clearingSystemMemberIdentification:
          $ref: '#/components/schemas/CommonClearingSystemMemberIdentification'

    AccountTransactionEntry:
      title: Account Transaction Entry
      type: object
      description: The account transaction entry object.
      required:
        - entryId
        - transactionType
        - entryStatus
        - bookingDate
        - valueDate
        - amount
        - bankTransactionCode
        - additionalEntryInformation
      properties:
        entryId:
          type: string
          description: Unique bank-defined ID for the transaction. Corresponds to the attribute _Ntry ⇾ AddtlInfInd ⇾ MsgId_ in SPS/ISO-20022.
          example: ENTRY123456789
        transactionType:
          $ref: '#/components/schemas/AccountTransactionTransactionType'
        entryStatus:
          type: string
          enum:
            - booked
            - pending
          description: >
            Indicates the status of an account movement. Corresponds to the attribute _Ntry ⇾ Sts ⇾ Cd_ in SPS/ISO-20022
          example: booked
        entryReference:
          type: string
          description: >
            Mandatory for business cases ISR and QR-IBAN. Contains the ISR participant number or QR-IBAN of the account owner. Corresponds to the
            attribute _NtryRef_ in SPS/ISO-20022.
          example: '10001628'
          maxLength: 35
        entryReferenceInternalId:
          type: string
          description: >
            Additional grouping criteria for business cases ISR and QR-IBAN. Contains the BISR-ID or first 6 characters of the QR reference.
          example: '123456'
          maxLength: 35
        reversalIndicator:
          type: boolean
          description: >
            Indicates if the transaction is a reversing entry. Must always be true. Corresponds to the attribute _RvslInd_ in SPS/ISO-20022.
          example: true
        bookingDate:
          $ref: '#/components/schemas/Date'
          description: The booking date of the transaction set by the bank. Corresponds to the attribute _BookgDt_ in SPS/ISO-20022.
        valueDate:
          $ref: '#/components/schemas/Date'
          description: The value date of the transaction set by the bank. Corresponds to the attribute _ValDt_ in SPS/ISO-20022.
        amount:
          $ref: '#/components/schemas/PaymentCurrencyAmount'
        instructedAmount:
          $ref: '#/components/schemas/AccountTransactionInstructedAmount'
        totalChargesAmount:
          $ref: '#/components/schemas/AccountTransactionItemCharges'
        bankTransactionCode:
          $ref: '#/components/schemas/AccountTransactionBankTransactionCode'
        additionalEntryInformation:
          type: string
          description: Additional entry information. Corresponds to the attribute _AddtlNtryInf_ in SPS/ISO-20022.
          example: Online Shopping Visa Debit Card Nr. xxxx 1234
        transactions:
          type: array
          description: Specifies the transaction entries.
          items:
            $ref: '#/components/schemas/AccountTransactionItem'

    AccountTransactionInstructedAmount:
      title: Account Transaction Instructed Amount
      type: object
      description: Specifies the instructed amount according to the account currency.
      required:
        - amount
        - sourceCurrency
        - targetCurrency
      properties:
        amount:
          $ref: '#/components/schemas/Amount'
          description: The amount instructed by the customer to the bank to carry out the transaction.
        sourceCurrency:
          $ref: '#/components/schemas/Currency'
          description: >
            The ISO currency three-letter code which is used to fund a currency conversion. Corresponds to the attribute
            _SrcCcy_ in SPS/ISO-20022.
        targetCurrency:
          $ref: '#/components/schemas/Currency'
          description: >
            The ISO currency three-letter code which the recipient will receive after the currency conversion.
            Corresponds to the attribute _TrgtCcy_ in SPS/ISO-20022.
        exchangeRate:
          type: string
          pattern: '^\d{1,11}$|^(?=\d+[.]\d+$).{3,12}$'
          maxLength: 12
          description: >
            The rate at which the source currency will be exchanged for the target currency. Corresponds to the attribute
            _XchgRate_ in SPS/ISO-20022.
          example: '0.957'
        exchangeIndicator:
          type: string
          maxLength: 4
          description: >
            Indicates whether the amount has to be multiplied or divided by the exchange rate (MULT, DIV).
            Mandatory if the exchange rate is provided.
          example: MULT

    AccountTransactionItem:
      title: Account Transaction Item
      type: object
      description: Specifies the transaction entry item.
      required:
        - transactionId
        - transactionType
        - amount
      properties:
        transactionId:
          type: string
          maxLength: 35
          description: >
            The unique identifier to the listed transaction. Defined by the bank. Corresponds to the attribute
            _TxDtls ⇾ Refs ⇾ PmtInfId_ in SPS/ISO-20022.
          example: TX12345A987
        transactionType:
          $ref: '#/components/schemas/AccountTransactionTransactionType'
        endToEndId:
          type: string
          maxLength: 35
          description: The unique reference of the debtor/creditor. Corresponds to the attribute _EndToEndId_ in SPS/ISO-20022.
          example: ENDTOENDID-01
        bankTransactionCode:
          $ref: '#/components/schemas/AccountTransactionBankTransactionCode'
        amount:
          $ref: '#/components/schemas/PaymentCurrencyAmount'
        instructedAmount:
          $ref: '#/components/schemas/AccountTransactionInstructedAmount'
        totalChargesAmount:
          $ref: '#/components/schemas/AccountTransactionItemCharges'
        counterparty:
          $ref: '#/components/schemas/AccountTransactionCounterparty'
        remittanceInformation:
          $ref: '#/components/schemas/PaymentRemittanceInformation'
        remittanceReference:
          $ref: '#/components/schemas/AccountTransactionRemittanceReference'
        additionalTransactionInformation:
          type: string
          maxLength: 140
          description: Any additional information to the transaction. Corresponds to the attribute _AddtlTxInf_ in SPS/ISO-20022.
          example: Online Shopping Visa Debit Card Nr. xxxx 1234

    AccountTransactionItemCharges:
      title: Account Transaction Item Charges
      type: object
      description: Specifies the total amount of account charges.
      required:
        - amount
        - currency
      properties:
        amount:
          $ref: '#/components/schemas/Amount'
          description: The total amount of account charges.
        currency:
          $ref: '#/components/schemas/Currency'
          description: The ISO currency three-letter code in which the total amount of charges was posed.
        chargeRecords:
          type: array
          description: Specifies the details about individual charges.
          items:
            $ref: '#/components/schemas/AccountTransactionItemChargesRecord'

    AccountTransactionItemChargesRecord:
      title: Account Transaction Item Charges Record
      type: object
      description: Specifies the details about individual charges.
      properties:
        amount:
          $ref: '#/components/schemas/Amount'
          description: The amount of individual charges.
        currency:
          $ref: '#/components/schemas/Currency'
          description: The ISO currency three-letter code in which the amount of individual charges was posed based.
        type:
          type: string
          maxLength: 35
          description: The type of charge. Corresponds to the attribute _Chrgs ⇾ Rcrd ⇾ Tp_ in SPS/ISO-20022.
          example: Some type of charge
        chargesIncludedIndicator:
          description: >
            Indicates whether the charges are included in the entry amount or not. Corresponds to the attribute
            _ChrgInclInd_ in SPS/ISO-20022.
          type: boolean
          example: true

    AccountTransactionRemittanceReference:
      title: Account Transaction Remittance Reference
      description: The remittance reference of the account transaction. Specifies the structured reference.
      type: object
      properties:
        type:
          type: string
          enum:
            - SCOR
            - ISR
            - QRR
          description: The reference type (QRR, SCOR, ISR). Corresponds to the attribute _RmtInf ⇾ Strd ⇾ CdtrRefInf ⇾ Tp_ in SPS/ISO-20022.
          example: SCOR
        reference:
          type: string
          maxLength: 35
          description: >
            The reference number associated to the choosen remittance type. Corresponds to the attribute _RmtInf ⇾ Strd ⇾ CdtrRefInf ⇾ Ref_
            in SPS/ISO-20022.
          example: '210000000003139471430009017'

    AccountTransactionReport:
      title: Account Transaction Report
      type: object
      description: The account transaction report object.
      required:
        - designation
        - entries
        - iban
      properties:
        iban:
          $ref: '#/components/schemas/IbanIdentification'
          description: The International Bank Account Number (IBAN), associated with the account.
        designation:
          $ref: '#/components/schemas/Designation'
        entries:
          type: array
          description: The account transaction entry object.
          items:
            $ref: '#/components/schemas/AccountTransactionEntry'
        _links:
          type: object
          description: Contains the paths to additional resources for specific account (e.g. path to account and balance resource).
          properties:
            self:
              type: string
              example: /accounts/550e8400e29b11d4a716446655440000/statements
            account:
              type: string
              example: /accounts/550e8400e29b11d4a716446655440000
            balance:
              type: string
              example: /accounts/550e8400e29b11d4a716446655440000/balance

    AccountTransactionTransactionType:
      title: Account Transaction Transaction Type
      description: >
        The transaction type of the account transaction, either credit (CRDT) or debit (DBIT). Corresponds to the attribute _CdtDbtInd_
        in SPS/ISO-20022.
      type: string
      enum:
        - CRDT
        - DBIT
      example: CRDT

    AccountTransactionStructuredAddress:
      title: Structured Postal Address for Transactions
      type: object
      description: Specifies the details of the counterparty structured address.
      required:
        - streetName
        - postCode
        - townName
      properties:
        streetName:
          type: string
          maxLength: 70
          description: The counterparty street name. Corresponds to the attribute _StrtNm_ in SPS/ISO-20022.
          example: Rue de la gare
        buildingNumber:
          type: string
          maxLength: 16
          description: The counterparty building number. Corresponds to the attribute _BldgNb_ in SPS/ISO-20022.
          example: '24'
        postCode:
          type: string
          maxLength: 16
          description: The counterparty post code. Corresponds to the attribute _PstCd_ in SPS/ISO-20022.
          example: '2501'
        townName:
          type: string
          maxLength: 35
          description: The counterparty town name. Corresponds to the attribute _TwnNm_ in SPS/ISO-20022.
          example: Biel
        country:
          type: string
          maxLength: 2
          description: The counterparty country. Corresponds to the attribute _Ctry_ in SPS/ISO-20022.
          example: CH

    AccountTransactionStructuredOrUnstructuredAddress:
      title: Common Structured or Unstructured Address
      description: Specifies the counterparty address (debtor address if transaction type = CRDT, creditor address if transaction type = DBIT).
      type: object
      properties:
        structured:
          $ref: '#/components/schemas/AccountTransactionStructuredAddress'
        unstructured:
          $ref: '#/components/schemas/AccountTransactionUnstructuredAddress'

    AccountTransactionUnstructuredAddress:
      title: Unstructured Address for Transactions
      type: object
      description: Specifies the details of the counterparty unstructured address.
      required:
        - addressLines
      properties:
        addressLines:
          type: array
          description: The counterparty address lines. Only four address lines allowed.
          maxItems: 4
          example:
            - Robert Schneider SA
            - Rue de la gare 24
          items:
            type: string
            maxLength: 70
        country:
          type: string
          description: The counterparty country. Corresponds to the attribute _Ctry_ in SPS/ISO-20022.
          maxLength: 2
          example: CH

    Amount:
      type: string
      pattern: '^[0-9]{1,12}([.][0-9]{1,5})?$'
      maxLength: 18
      description: An amount. Corresponds to the attribute _Amt_ in SPS/ISO-20022.
      example: '10.25'

    BalanceCurrencyAmount:
      title: Balance Currency-Amount
      description: Specifies the requested account balance. Corresponds to the attribute _Bal_ in SPS/ISO-20022.
      type: object
      required:
        - currency
        - amount
      properties:
        currency:
          $ref: '#/components/schemas/Currency'
          description: The ISO currency three-letter code in which the balance and the account are held.
        amount:
          $ref: '#/components/schemas/Amount'
          description: The amount of the requested account balance.

    CommonAccountId:
      type: string
      pattern: '^[A-Za-z0-9](([A-Za-z0-9._]|-){0,254}[A-Za-z0-9]){0,1}$'
      maxLength: 256
      description: Unique identifier (UUID) of the account for which information shall be retrieved.
      example: abc123_abcxyz.123789.abcxyz.abcxyz_abcxyz_abcxyz_abcxyz_ccccc_123abc

    CommonClearingSystemMemberIdentification:
      title: Common Clearing System Member Identification
      type: object
      description: Specifies the Information used to identify a member within a clearing system.
      required:
        - code
        - memberId
      properties:
        code:
          type: string
          maxLength: 5
          description: >
            Identification code of a clearing system. Only "CHBCC" is permitted in Switzerland. Corresponds to the attribute
            _ClrSysId ⇾ Cd_ in SPS/ISO-20022.
          example: CHBCC
        memberId:
          type: string
          maxLength: 35
          description: >
            The identification of a clearing system member. Clearing ID (Bank Code, "National Identifier") of the financial institution.
            Corresponds to the attribute _ClrSysId ⇾ MmbId_ in SPS/ISO-20022.
          example: '00230'

    CommonErrorResponse:
      title: Common Error Response
      type: object
      description: The common error response object.
      properties:
        type:
          $ref: '#/components/schemas/CommonErrorType'
        title:
          type: string
          description: The title of the common error response.
          example: This is the general problem description
        detail:
          type: string
          description: The details about the common error response.
          example: Detailed problem description with respect to the current request, e.g., invalid account number format
        instance:
          type: string
          description: The path to the corresponding resource.
          example: path/to/corresponding/resource

    CommonErrorType:
      title: Common Error Type
      type: string
      description: Error Types for commonErrorResponse.
      enum:
        - /problems/INVALID_PAYLOAD
        - /problems/MALFORMED_PAYLOAD
        - /problems/INVALID_TOKEN
        - /problems/EXPIRED_TOKEN
        - /problems/INSUFFICIENT_PRIVILEGES
        - /problems/NO_ACCESS_TO_RESOURCE
        - /problems/RESOURCE_DOES_NOT_EXIST
        - /problems/RESOURCE_NOT_READY
        - /problems/RESOURCE_TOO_LARGE
        - /problems/WRONG_METHOD
        - /problems/OPERATION_NOT_ALLOWED
        - /problems/TECHNICAL_ERROR
        - /problems/NOT_IMPLEMENTED
        - /problems/SERVICE_UNAVAILABLE
      example: /problems/TECHNICAL_ERROR

    Currency:
      type: string
      maxLength: 3
      minLength: 3
      description: The ISO currency three-letter code. Corresponds to the attribute _Ccy_ in SPS/ISO-20022.
      example: CHF

    Date:
      type: string
      format: date
      description: A date.
      example: 2018-04-13

    Designation:
      type: string
      maxLength: 140
      description: |
        This element shall always be populated with the account alias, if defined, otherwise with specific
        bank account name (e.g. bank saving account).
      example: Firmenkonto

    IbanIdentification:
      type: string
      maxLength: 34
      pattern: '^[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}$'
      description: The International Bank Account Number (IBAN), associated with the account.
      example: CH5481230000001998736

    Iso20022ReportReference:
      title: ISO20022 Report Reference
      type: object
      description: The referenced ISO20022 report (camt.053).
      properties:
        name:
          type: string
          description: The name of the referenced ISO20022 report, i.e. the camt.053 file.
          example: CH1100790016123456029_2023-01-16
        description:
          type: string
          description: The description of the referenced ISO20022 report, i.e. the camt.053 file.
          example: Kontoauszug von CH1100790016123456029 am 16.01.2023
        type:
          type: string
          description: The type of the referenced ISO20022 report.
          enum:
            - CAMT53
          example: CAMT53
        schemaVersion:
          type: string
          example: camt.053.001.01
          description: The delivered schema version of the referenced ISO20022 report.
          pattern: '^camt\.053\.[0-9]{3}\.[0-9]{2}$'
        id:
          type: string
          description: The unique identifier of the referenced ISO20022 report.
          example: '8265333'
        account:
          $ref: '#/components/schemas/PaymentIbanAccount'
        dateFrom:
          $ref: '#/components/schemas/Date'
          description: The start date of the transaction query period.
        dateTo:
          $ref: '#/components/schemas/Date'
          description: The end date of the transaction query period.

    PaymentCurrencyAmount:
      title: Payment Currency Amount
      type: object
      description: Specifies the entry amount according to the account currency.
      required:
        - currency
        - amount
      properties:
        currency:
          $ref: '#/components/schemas/Currency'
          description: The ISO currency three-letter code in which the entry was posed.
        amount:
          $ref: '#/components/schemas/Amount'
          description: The entry amount, which will be reflected in the account balance.

    PaymentIbanAccount:
      title: Payment IBAN Account
      type: object
      description: The IBAN account object.
      required:
        - type
        - identification
      properties:
        type:
          type: string
          description: >
            The allowed account identification type for the creditor account depends on the payment type.
            The debtor account must always be an IBAN.
          enum:
            - IBAN
          example: IBAN
        identification:
          $ref: '#/components/schemas/IbanIdentification'
          description: The International Bank Account Number (IBAN), associated with the account.

    PaymentRemittanceInformation:
      title: Payment Remittance Information
      description: Either remittanceReference or remittanceInformation must be set. Corresponds to the attribute _RmtInf ⇾ Ustrd_ in SPS/ISO-20022.
      type: string
      maxLength: 140
      example: Rechnung Nr. 408

  parameters:
    path_accountId:
      in: path
      name: accountId
      required: true
      schema:
        maxLength: 256
        pattern: '^[A-Za-z0-9](([A-Za-z0-9._]|-){0,254}[A-Za-z0-9]){0,1}$'
        type: string
        example: accountId
      description: ID of the account.

    path_reportId:
      in: path
      name: reportId
      required: true
      schema:
        maxLength: 35
        type: string
      description: Unique ID of the requested ISO20022 XML camt.053 document.

    path_entryId:
      in: path
      name: entryId
      required: true
      schema:
        type: string
      description: ID of the transaction entry.

    cursor:
      in: query
      name: cursor
      required: false
      schema:
        type: string
        example: cursorIDxyz
      description: Optional parameter for pagination. An opaque string value used for pagination.

    date:
      in: query
      name: date
      schema:
        $ref: '#/components/schemas/Date'
      description: 'The date to query, formatted as yyyy-mm-dd. Default value: current date.'

    limit:
      in: query
      name: limit
      required: false
      schema:
        type: integer
        format: int32
        example: 25
        minimum: 1
      description: Optional parameter for pagination. Maximum number of entries to be returned.

    agent_in_header:
      in: header
      name: User-Agent
      required: true
      schema:
        type: string
      description: Name and version of the of the Client software.

    authorization_in_header:
      in: header
      name: Authorization
      required: true
      schema:
        type: string
      description: Bearer followed by a base64 encoded OAuth access token.

    clientid_in_header:
      in: header
      name: X-CorAPI-Client-ID
      required: true
      schema:
        type: string
      description: 'ID of the client forwarded to the provider (SCOPE: FI).'

    correlation_in_header:
      in: header
      name: X-Correlation-ID
      required: true
      schema:
        type: string
      description: Unique ID (defined by the caller) which will be reflected back in the response.

    optional_psu_ip_in_header:
      in: header
      name: X-PSU-IP-Address
      required: false
      schema:
        type: string
      description: 'IP address of the user initiating the operation (SCOPE: FI - optional).'

    optional_psu_user_agent_in_header:
      in: header
      name: X-PSU-User-Agent
      required: false
      schema:
        type: string
      description: 'User of the client software (SCOPE: FI - optional).'

    optional_targetid_in_header:
      in: header
      name: X-CorAPI-Target-ID
      required: false
      schema:
        type: string
      description: 'ID of the target, e.g., a financial institution (SCOPE: FI - optional).'

  securitySchemes:
    OAuth2:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: https://example.com/oauth/authorize
          tokenUrl: https://example.com/oauth/token
          scopes:
            read: Grants read access
            write: Grants write access

  responses:
    standard202:
      headers:
        X-Correlation-ID:
          $ref: '#/components/headers/X-Correlation-ID'
      description: |
        Accepted - Valid request, requested data not available yet. The request may be attempted at a later time.
      content:
        application/json:
          schema:
            type: object
            # properties: ??

    standard204:
      headers:
        X-Correlation-ID:
          $ref: '#/components/headers/X-Correlation-ID'
      description: |
        No content - The server has successfully fulfilled the request. There is no content to return and never will be.

    standard400:
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Content-Language:
          $ref: '#/components/headers/Content-Language'
        X-Correlation-ID:
          $ref: '#/components/headers/X-Correlation-ID'
      description: |
        Bad Request - The format of the request was invalid.

        Examples:
        - InvalidPayload:
        type: /problems/INVALID_PAYLOAD
        title: Payload does not comply with API specification
        detail: Malformed JSON
        instance: path/to/corresponding/resource

        - InvalidParameter:
        type: /problems/INVALID_PAYLOAD
        title: Invalid parameter values have been detected
        detail: Sent data could not processed
        instance: path/to/corresponding/resource

        - MissingId:
        type: /problems/INVALID_PAYLOAD
        title: The payload was not valid
        detail: ID is missing
        instance: path/to/corresponding/resource
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/CommonErrorResponse'

    standard401:
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Content-Language:
          $ref: '#/components/headers/Content-Language'
        X-Correlation-ID:
          $ref: '#/components/headers/X-Correlation-ID'
      description: |
        Unauthorized - The request has not been applied because it provides no valid authentication credentials for the target resource.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/CommonErrorResponse'

    standard403:
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Content-Language:
          $ref: '#/components/headers/Content-Language'
        X-Correlation-ID:
          $ref: '#/components/headers/X-Correlation-ID'
      description: |
        Forbidden - A valid OAuth Token was received, but access was denied.
        (Depending on the security requirements, providers can return 404 instead)

        Examples:
        - InsufficientPrivileges:
        type: /problems/INSUFFICIENT_PRIVILEGES
        title: No privileges for the requested operation
        detail: Insufficient privileges for the requested operation
        instance: path/to/corresponding/resource

        - ExpiredToken:
        type: /problems/EXPIRED_TOKEN
        title: The OAuth Token is expired
        detail: The token is no longer valid
        instance: path/to/corresponding/resource

        - NoFutureDateSupported:
        type: /problems/MALFORMED_PAYLOAD
        title: Invalid parameter values have been detected
        detail: Data for date in the future cannot be requested
        instance: path/to/corresponding/resource
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/CommonErrorResponse'

    standard404:
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Content-Language:
          $ref: '#/components/headers/Content-Language'
        X-Correlation-ID:
          $ref: '#/components/headers/X-Correlation-ID'
      description: |
        Not Found - Either the endpoint does not exist or a requested resource is not yet available (e.g., account statements)

        Examples:
        - InvalidAccounts:
        type: /problems/INSUFFICIENT_PRIVILEGES
        title: Insufficient privileges to access resource
        detail: The provided token does not grant access to the requested account
        instance: path/to/corresponding/resource

        - InvalidToken:
        type: /problems/INSUFFICIENT_PRIVILEGES
        title: Insufficient privileges to access resource
        detail: The provided token is not valid
        instance: path/to/corresponding/resource

        - WrongEndpointUrl:
        type: /problems/TECHNICAL_ERROR
        title: URL not found
        detail: The requested endpoint does not exist
        instance: path/to/corresponding/resource

        - NoIntradayDataSupported:
        type: /problems/NOT_IMPLEMENTED
        title: Feature is not implemented
        detail: This interface does not support intraday data
        instance: path/to/corresponding/resource
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/CommonErrorResponse'

    standard405:
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Content-Language:
          $ref: '#/components/headers/Content-Language'
        X-Correlation-ID:
          $ref: '#/components/headers/X-Correlation-ID'
      description: |
        Method Not Allowed - The method received in the request-line is known by the origin server but not supported by the target resource.

        Examples:
        - NotSupportedOperation:
        type: /problems/WRONG_METHOD
        title: This HTTP operation is not allowed on this endpoint
        detail: Only GET operations are allowed
        instance: path/to/corresponding/resource
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/CommonErrorResponse'

    standard500:
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Content-Language:
          $ref: '#/components/headers/Content-Language'
        X-Correlation-ID:
          $ref: '#/components/headers/X-Correlation-ID'
      description: |
        Internal Server Error - The server encountered an unexpected condition that prevented it from fulfilling the request.

        Examples:
        - TechnicalServerError:
        type: /problems/TECHNICAL_ERROR
        title: Technical error on server side
        detail: Processing yielded a technical error
        instance: path/to/corresponding/resource

        - ResourceTooLarge:
        type: /problems/RESOURCE_TOO_LARGE
        title: Generated resource was too large
        detail: The generated resource exceeded the size limit
        instance: path/to/corresponding/resource
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/CommonErrorResponse'

    standard501:
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Content-Language:
          $ref: '#/components/headers/Content-Language'
        X-Correlation-ID:
          $ref: '#/components/headers/X-Correlation-ID'
      description: |
        Not Implemented - The server does not support the functionality required to fulfill the request.

        Examples:
        - EndpointNotImplemented:
        type: /problems/NOT_IMPLEMENTED
        title: Target endpoint is not implemented
        detail: This endpoint is not implemented
        instance: path/to/corresponding/resource
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/CommonErrorResponse'

    standard503:
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Content-Language:
          $ref: '#/components/headers/Content-Language'
        X-Correlation-ID:
          $ref: '#/components/headers/X-Correlation-ID'
      description: |
        Service Unavailable - The server is currently unable to handle the request due to a temporary overload or scheduled maintenance.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/CommonErrorResponse'

  headers:
    Content-Language:
      description: Response language - always en
      schema:
        type: string

    Content-Type:
      description: application/problem+json; charset=utf-8 according to RFC7807
      schema:
        type: string
        example: application/problem+json; charset=utf-8

    X-Correlation-ID:
      description: Client defined ID from request to correlates HTTP requests between a client and server
      schema:
        type: string
        example: f058ebd6-02f7-4d3f-942e-904344e8cde5

    X-Next-Cursor:
      description: An opaque string value, or an empty string if there are no more results.
      schema:
        type: string
        example: cursorIDxyz
